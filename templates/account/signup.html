{% extends "base.html" %}

{% block extra_css %}
<style>
  /* Align labels and inputs on auth forms */
  .auth-form .row { align-items: center; }
  .auth-form label.col-form-label { min-width: 170px; }
  .auth-form .field-col { max-width: 520px; }
  .auth-form input[type="email"],
  .auth-form input[type="password"] {
    width: 100%;
  }
  
  /* Mobile responsive */
  @media (max-width: 576px) {
    .auth-form label.col-form-label { min-width: 0; }
    .auth-actions { margin-left: 0; }
  }
  
  /* Password help text styling */
  .auth-form .form-text { margin-top: .25rem; margin-left: .375rem; }
  .auth-form .form-text ul { margin: .25rem 0; margin-left: 0; padding-left: 0; list-style-position: inside; }
  .auth-form .form-text li { margin-bottom: .25rem; }
  
  /* Input styling for dark/light mode */
  .auth-form input { 
    padding: .5rem .75rem; 
    border: 1px solid var(--bs-border-color); 
    border-radius: .375rem; 
    background: var(--bs-body-bg); 
    color: var(--bs-body-color); 
  }
  .auth-form input:focus { 
    outline: 0; 
    box-shadow: 0 0 0 .25rem rgba(13,110,253,.25); 
    border-color: var(--bs-primary); 
  }
  
  /* Error messages */
  .auth-form .errorlist { color: var(--bs-danger); margin: .25rem 0 0; }
  .auth-form .errorlist li { list-style: none; }
  .auth-form .form-errors { color: var(--bs-danger); }
  .auth-form .required::after { content: " *"; color: var(--bs-danger); }
</style>
{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2>Sign Up</h2>
  <form method="post" action="{% url 'account_signup' %}" class="auth-form mt-3">
    {% csrf_token %}

    {% if form.non_field_errors %}
      <div class="alert alert-danger form-errors">{{ form.non_field_errors }}</div>
    {% endif %}

    <div class="row mb-3">
      <label for="{{ form.email.id_for_label }}" class="col-form-label">Email</label>
      <div class="field-col">
        {{ form.email }}
        {% if form.email.errors %}
          <ul class="errorlist">{% for e in form.email.errors %}<li>{{ e }}</li>{% endfor %}</ul>
        {% endif %}
      </div>
    </div>

    <div class="row mb-1">
      <label for="{{ form.password1.id_for_label }}" class="col-form-label">Password</label>
      <div class="field-col">
        {{ form.password1 }}
        {% if form.password1.errors %}
          <ul class="errorlist">{% for e in form.password1.errors %}<li>{{ e }}</li>{% endfor %}</ul>
        {% endif %}
        {% if form.password1.help_text %}
          <div class="form-text mt-0">{{ form.password1.help_text|safe }}</div>
        {% endif %}
      </div>
    </div>

    <div class="row mb-2 mt-0">
      <label for="{{ form.password2.id_for_label }}" class="col-form-label">Password (again)</label>
      <div class="field-col">
        {{ form.password2 }}
        {% if form.password2.errors %}
          <ul class="errorlist">{% for e in form.password2.errors %}<li>{{ e }}</li>{% endfor %}</ul>
        {% endif %}
        <div class="d-flex justify-content-end mt-2">
          <button type="submit" class="btn btn-success">Sign Up</button>
        </div>
      </div>
    </div>
  </form>
  
  <div class="mt-3 auth-form">
    <div class="row">
      <label class="col-form-label"></label>
      <div class="field-col">
        <div style="width: 100%; text-align: center;">
          <a href="{% url 'account_login' %}">Already have an account? Login</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
